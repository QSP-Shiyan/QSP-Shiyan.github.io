<footer class="footer">
    <div class="footer-container">
        <div class="footer-section">
            <h3>联系我们</h3>
            <p><i class="fas fa-building"></i> 总部：2024级36、37班</p>
            <p><i class="fab fa-qq"></i> 官Q：3583268240</p>
            <p><i class="fas fa-envelope"></i> 邮箱：3583268240@qq.com</p>
        </div>
        <div class="footer-section">
            <h3>快速链接</h3>
            <div class="footer-links">
                <a href="http://sdshiyan.jinan-edu.cn" class="footer-link">
                    <i class="fas fa-globe"></i>省实验官网
                </a>
                <a href="images/map.html" class="footer-link">
                    <i class="fas fa-map-marker-alt"></i>校区地图
                </a>
                <a href="qsc/eng.html" class="footer-link">
                    <i class="fas fa-bookmark"></i>占位
                </a>
            </div>
        </div>
    </div>
</footer>

<script>
    // 图片加载处理函数
    function handleImageLoad(img) {
        img.classList.add('loaded');
    }

    // 移动端菜单切换（修复版）
    const navLinks = document.getElementById('navLinks');
    let isMenuOpen = false;

    function toggleMobileMenu() {
        isMenuOpen = !isMenuOpen;
        navLinks.classList.toggle('active', isMenuOpen);
        
        // 控制页面滚动
        document.body.style.overflow = isMenuOpen ? 'hidden' : '';
        
        // 动态计算菜单高度（关键修复）
        if (isMenuOpen) {
            setTimeout(() => {
                const navHeight = navLinks.scrollHeight;
                navLinks.style.maxHeight = `${Math.min(navHeight, 400)}px`; // 最大高度400px
            }, 10);
        } else {
            navLinks.style.maxHeight = '0';
        }
    }

    // 点击外部区域关闭菜单
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.nav') && isMenuOpen) {
            toggleMobileMenu();
        }
    });

    // 图片加载处理
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('img').forEach(img => {
            if (img.complete) {
                handleImageLoad(img);
            } else {
                img.addEventListener('load', () => handleImageLoad(img));
                img.addEventListener('error', () => {
                    console.log('图片加载失败:', img.src);
                    handleImageLoad(img); // 即使失败也移除模糊效果
                });
            }
        });
    });
</script>
